import{m as v,o as w,c as g,F as u,a as c}from"./index.9e3165fc.js";const _=c("video",{class:"layer",src:"",muted:"","webkit-playsinline":"",playsinline:"","x5-playsinline":"",style:{left:"1000%"}},null,-1),x=c("canvas",{id:"canvaselement",width:"1920"},null,-1),y={__name:"test",setup(m){let n;return v(()=>{const t=document.querySelector("video"),e=document.querySelector("canvas");var l=e.getContext("2d",{alpha:!1});const d=i=>{n=i.getVideoTracks()[0];let r=new ImageCapture(n);r&&setInterval(()=>{r.grabFrame().then(h).catch(()=>{})},1e3/60)};function h(i){e.width=window.innerWidth*window.devicePixelRatio,e.height=i.height/i.width*window.innerWidth*window.devicePixelRatio,e.style.width=e.width/window.devicePixelRatio+"px",e.style.height=e.height/window.devicePixelRatio+"px",l.drawImage(i,0,0,e.width,e.height)}t.addEventListener("loadedmetadata",()=>{e.height=t.videoHeight/t.videoWidth*window.innerWidth*window.devicePixelRatio,e.width=window.innerWidth*window.devicePixelRatio,e.style.width=e.width/window.devicePixelRatio+"px",e.style.height=e.height/window.devicePixelRatio+"px"});var o={audio:!1,video:{facingMode:"environment"}};const s=i=>{console.error(i)};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(o).then(d,s):navigator.getUserMedia?navigator.getUserMedia(o,d,s):a(new Error("\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u6253\u5F00\u6444\u50CF\u5934"))}),(t,e)=>(w(),g(u,null,[_,x],64))}};export{y as default};
